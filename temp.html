<!doctype html>
<html lang="en-GB">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<link rel="profile" href="https://gmpg.org/xfn/11" />
	<title>RootIsGod &#8211; Sysadmin Tips for the Cloud Age</title>
<link rel='dns-prefetch' href='//s.w.org' />
<link rel="alternate" type="application/rss+xml" title="RootIsGod &raquo; Feed" href="https://www.rootisgod.com/index.php/feed/" />
<link rel="alternate" type="application/rss+xml" title="RootIsGod &raquo; Comments Feed" href="https://www.rootisgod.com/index.php/comments/feed/" />
		<script>
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/12.0.0-1\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/12.0.0-1\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/www.rootisgod.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=5.4.2"}};
			/*! This file is auto-generated */
			!function(e,a,t){var r,n,o,i,p=a.createElement("canvas"),s=p.getContext&&p.getContext("2d");function c(e,t){var a=String.fromCharCode;s.clearRect(0,0,p.width,p.height),s.fillText(a.apply(this,e),0,0);var r=p.toDataURL();return s.clearRect(0,0,p.width,p.height),s.fillText(a.apply(this,t),0,0),r===p.toDataURL()}function l(e){if(!s||!s.fillText)return!1;switch(s.textBaseline="top",s.font="600 32px Arial",e){case"flag":return!c([127987,65039,8205,9895,65039],[127987,65039,8203,9895,65039])&&(!c([55356,56826,55356,56819],[55356,56826,8203,55356,56819])&&!c([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]));case"emoji":return!c([55357,56424,55356,57342,8205,55358,56605,8205,55357,56424,55356,57340],[55357,56424,55356,57342,8203,55358,56605,8203,55357,56424,55356,57340])}return!1}function d(e){var t=a.createElement("script");t.src=e,t.defer=t.type="text/javascript",a.getElementsByTagName("head")[0].appendChild(t)}for(i=Array("flag","emoji"),t.supports={everything:!0,everythingExceptFlag:!0},o=0;o<i.length;o++)t.supports[i[o]]=l(i[o]),t.supports.everything=t.supports.everything&&t.supports[i[o]],"flag"!==i[o]&&(t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&t.supports[i[o]]);t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&!t.supports.flag,t.DOMReady=!1,t.readyCallback=function(){t.DOMReady=!0},t.supports.everything||(n=function(){t.readyCallback()},a.addEventListener?(a.addEventListener("DOMContentLoaded",n,!1),e.addEventListener("load",n,!1)):(e.attachEvent("onload",n),a.attachEvent("onreadystatechange",function(){"complete"===a.readyState&&t.readyCallback()})),(r=t.source||{}).concatemoji?d(r.concatemoji):r.wpemoji&&r.twemoji&&(d(r.twemoji),d(r.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style>
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
	<link rel='stylesheet' id='wp-block-library-css'  href='https://www.rootisgod.com/wp-includes/css/dist/block-library/style.min.css?ver=5.4.2' media='all' />
<link rel='stylesheet' id='wp-block-library-theme-css'  href='https://www.rootisgod.com/wp-includes/css/dist/block-library/theme.min.css?ver=5.4.2' media='all' />
<link rel='stylesheet' id='twentynineteen-style-css'  href='https://www.rootisgod.com/wp-content/themes/twentynineteen/style.css?ver=1.6' media='all' />
<link rel='stylesheet' id='twentynineteen-print-style-css'  href='https://www.rootisgod.com/wp-content/themes/twentynineteen/print.css?ver=1.6' media='print' />
<link rel='https://api.w.org/' href='https://www.rootisgod.com/index.php/wp-json/' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://www.rootisgod.com/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://www.rootisgod.com/wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 5.4.2" />
<style>.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style></head>

<body class="home blog wp-embed-responsive hfeed image-filters-enabled">
<div id="page" class="site">
	<a class="skip-link screen-reader-text" href="#content">Skip to content</a>

		<header id="masthead" class="site-header">

			<div class="site-branding-container">
				<div class="site-branding">

								<h1 class="site-title"><a href="https://www.rootisgod.com/" rel="home">RootIsGod</a></h1>
			
				<p class="site-description">
				Sysadmin Tips for the Cloud Age			</p>
			</div><!-- .site-branding -->
			</div><!-- .site-branding-container -->

					</header><!-- #masthead -->

	<div id="content" class="site-content">

	<div id="primary" class="content-area">
		<main id="main" class="site-main">

		
<article id="post-82" class="post-82 post type-post status-publish format-standard hentry category-uncategorised entry">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://www.rootisgod.com/index.php/2020/07/29/microsoft-sql-server-backups-and-deletions/" rel="bookmark">Microsoft SQL Server Backups and Deletions</a></h2>	</header><!-- .entry-header -->

	
	<div class="entry-content">
		
<p>This is an unashamed post for me to remember something later. Below are a couple of scripts to backup a set of Microsoft SQL Server DBs. Also, to delete, perhaps those same DBs,  that you no longer need.</p>



<p><span style="color:#c7070a" class="has-inline-color"><span style="text-decoration: underline;"><strong>NOTE: RUN AT YOUR OWN RISK!</strong></span></span></p>



<h2>Backups</h2>



<p>Tweak as necessary. Hopefully it is pretty clear where to amend certain things if you have a slight familiarity with SQL already. Apologies to the people I ripped this off (<a href="https://www.mssqltips.com/sqlservertip/1070/simple-script-to-backup-all-sql-server-databases/">https://www.mssqltips.com/sqlservertip/1070/simple-script-to-backup-all-sql-server-databases/</a>), but this is a version I can use without thinking too hard.</p>



<pre class="wp-block-preformatted">DECLARE @name VARCHAR(50) -- database name
DECLARE @path VARCHAR(256) -- path for backup files
DECLARE @fileName VARCHAR(256) -- filename for backup
DECLARE @fileDate VARCHAR(20) -- used for file name

-- specify database backup directory
SET @path = 'C:\SQL_Backups_Temp\'

-- specify filename format
-- SELECT @fileDate = CONVERT(VARCHAR(20),GETDATE(),112) -- DBname_YYYYDDMM.BAK
SELECT @fileDate = CONVERT(VARCHAR(20),GETDATE(),112) + '_' + REPLACE(CONVERT(VARCHAR(20),GETDATE(),108),':','') -- DBname_YYYYDDMM_HHMMSS.BAK

DECLARE db_cursor CURSOR READ_ONLY FOR
SELECT name
FROM master.sys.databases
WHERE name NOT IN ('master','model','msdb','tempdb') -- exclude these databases
AND name like 'DB_Name_00%' -- % means any chars afterwards. Remove if no filter needed
AND state = 0 -- database is online
AND is_in_standby = 0 -- database is not read only for log shipping

OPEN db_cursor
FETCH NEXT FROM db_cursor INTO @name

WHILE @@FETCH_STATUS = 0
BEGIN
  PRINT @name
  SET @fileName = @path + @name + '_' + @fileDate + '.BAK'
  BACKUP DATABASE @name TO DISK = @fileName WITH COMPRESSION
  FETCH NEXT FROM db_cursor INTO @name
END

CLOSE db_cursor
DEALLOCATE db_cursor</pre>



<p></p>



<h2>Deletions</h2>



<p>This to delete Databases</p>



<pre class="wp-block-preformatted">use master
go

declare @dbnames nvarchar (max)
declare @statement nvarchar (max)
set @dbnames = ''
set @statement = ''

select @dbnames = @dbnames + ', [' + name + ']' from sys.databases where name like 'DB_Name_00%'
if len (@dbnames) = 0
  begin
    print 'No databases to drop.'
  end
else
  begin
    set @statement = 'DROP DATABASE ' + substring (@dbnames, 2, len (@dbnames)) -- The 2 is just to ignore the ', ' from the select above
    print @statement
    exec sp_executesql @statement -- Comment to show results first
end</pre>



<p></p>
	</div><!-- .entry-content -->

	<footer class="entry-footer">
		<span class="byline"><svg class="svg-icon" width="16" height="16" aria-hidden="true" role="img" focusable="false" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg><span class="screen-reader-text">Posted by</span><span class="author vcard"><a class="url fn n" href="https://www.rootisgod.com/index.php/author/iain/">iain</a></span></span><span class="posted-on"><svg class="svg-icon" width="16" height="16" aria-hidden="true" role="img" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><defs><path id="a" d="M0 0h24v24H0V0z"></path></defs><clipPath id="b"><use xlink:href="#a" overflow="visible"></use></clipPath><path clip-path="url(#b)" d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2zm4.2 14.2L11 13V7h1.5v5.2l4.5 2.7-.8 1.3z"></path></svg><a href="https://www.rootisgod.com/index.php/2020/07/29/microsoft-sql-server-backups-and-deletions/" rel="bookmark"><time class="entry-date published" datetime="2020-07-29T12:40:26+01:00">29th July 2020</time><time class="updated" datetime="2020-07-29T14:30:53+01:00">29th July 2020</time></a></span><span class="cat-links"><svg class="svg-icon" width="16" height="16" aria-hidden="true" role="img" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg><span class="screen-reader-text">Posted in</span><a href="https://www.rootisgod.com/index.php/category/uncategorised/" rel="category tag">Uncategorised</a></span><span class="comments-link"><svg class="svg-icon" width="16" height="16" aria-hidden="true" role="img" focusable="false" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M21.99 4c0-1.1-.89-2-1.99-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4-.01-18z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg><a href="https://www.rootisgod.com/index.php/2020/07/29/microsoft-sql-server-backups-and-deletions/#respond">Leave a comment<span class="screen-reader-text"> on Microsoft SQL Server Backups and Deletions</span></a></span>	</footer><!-- .entry-footer -->
</article><!-- #post-82 -->

<article id="post-45" class="post-45 post type-post status-publish format-standard hentry category-uncategorised entry">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://www.rootisgod.com/index.php/2020/01/18/ubuntu-vm/" rel="bookmark">Awww Snap, My Linux Partition is Too Small..</a></h2>	</header><!-- .entry-header -->

	
	<div class="entry-content">
		<p style="margin-top: 0px; margin-bottom: 0.65em; padding-top: 0px; caret-color: #dcdcdc; color: #dcdcdc; font-family: Avenir, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-tap-highlight-color: rgba(26, 26, 26, 0.301961); -webkit-text-size-adjust: 100%; -webkit-text-stroke-width: 0px; text-decoration: none;"><span style="color: #000000;">We&#8217;ve all been there&#8230; Make a Linux VM, disk is too small&#8230; Arggh! I come from a Windows world where a disk resize is a click away in Disk Management, and so this scenario has always filled me with dread, especially as their is no GUI. And, a google for a disk resize in linux always suggests using parted or something similar. No good without a ui&#8230;</span></p>
<p style="margin-top: 0.6em; margin-bottom: 0.65em; caret-color: #dcdcdc; color: #dcdcdc; font-family: Avenir, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-tap-highlight-color: rgba(26, 26, 26, 0.301961); -webkit-text-size-adjust: 100%; -webkit-text-stroke-width: 0px; text-decoration: none;"><span style="color: #000000;">So, to test this out, make a VM in ESXi (or Virtualbox etc&#8230;) and make it small. This one is 8GB.</span></p>
<p style="margin-top: 0.6em; margin-bottom: 0.65em; caret-color: #dcdcdc; color: #dcdcdc; font-family: Avenir, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-tap-highlight-color: rgba(26, 26, 26, 0.301961); -webkit-text-size-adjust: 100%; -webkit-text-stroke-width: 0px; text-decoration: none;"><span style="color: #000000;"><img class="size-full wp-image-39" src="http://rootisgod.com/wp-content/uploads/2020/01/7af0435c-bdd0-48d9-be6f-0082aa536fb0.png" width="1360" height="612" srcset="https://www.rootisgod.com/wp-content/uploads/2020/01/7af0435c-bdd0-48d9-be6f-0082aa536fb0.png 1360w, https://www.rootisgod.com/wp-content/uploads/2020/01/7af0435c-bdd0-48d9-be6f-0082aa536fb0-300x135.png 300w, https://www.rootisgod.com/wp-content/uploads/2020/01/7af0435c-bdd0-48d9-be6f-0082aa536fb0-1024x461.png 1024w, https://www.rootisgod.com/wp-content/uploads/2020/01/7af0435c-bdd0-48d9-be6f-0082aa536fb0-768x346.png 768w" sizes="(max-width: 1360px) 100vw, 1360px" /></span></p>
<p style="margin-top: 0.6em; margin-bottom: 0.65em; caret-color: #dcdcdc; color: #dcdcdc; font-family: Avenir, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-tap-highlight-color: rgba(26, 26, 26, 0.301961); -webkit-text-size-adjust: 100%; -webkit-text-stroke-width: 0px; text-decoration: none;"><span style="color: #000000;">Install the OS (Ubuntu 18.04 LTS in this example) and then make sure all is installed and ready to go.</span></p>
<p style="margin-top: 0.6em; margin-bottom: 0.65em; caret-color: #dcdcdc; color: #dcdcdc; font-family: Avenir, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-tap-highlight-color: rgba(26, 26, 26, 0.301961); -webkit-text-size-adjust: 100%; -webkit-text-stroke-width: 0px; text-decoration: none;"><span style="color: #000000;"><code>Disclaimer: I have tested this with this type of disk install, so not sure if it will work with LVM.</code></span></p>
<p style="margin-top: 0.6em; margin-bottom: 0.65em; caret-color: #dcdcdc; color: #dcdcdc; font-family: Avenir, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-tap-highlight-color: rgba(26, 26, 26, 0.301961); -webkit-text-size-adjust: 100%; -webkit-text-stroke-width: 0px; text-decoration: none;"><span style="color: #000000;"><img class="size-full wp-image-40" src="http://rootisgod.com/wp-content/uploads/2020/01/7fa0e587-8f75-43b7-9641-a6a040d09c8c.png" width="1158" height="526" srcset="https://www.rootisgod.com/wp-content/uploads/2020/01/7fa0e587-8f75-43b7-9641-a6a040d09c8c.png 1158w, https://www.rootisgod.com/wp-content/uploads/2020/01/7fa0e587-8f75-43b7-9641-a6a040d09c8c-300x136.png 300w, https://www.rootisgod.com/wp-content/uploads/2020/01/7fa0e587-8f75-43b7-9641-a6a040d09c8c-1024x465.png 1024w, https://www.rootisgod.com/wp-content/uploads/2020/01/7fa0e587-8f75-43b7-9641-a6a040d09c8c-768x349.png 768w" sizes="(max-width: 1158px) 100vw, 1158px" /></span></p>
<p style="margin-top: 0.6em; margin-bottom: 0.65em; caret-color: #dcdcdc; color: #dcdcdc; font-family: Avenir, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-tap-highlight-color: rgba(26, 26, 26, 0.301961); -webkit-text-size-adjust: 100%; -webkit-text-stroke-width: 0px; text-decoration: none;"><span style="color: #000000;">And check the disk space&#8230;</span></p>
<pre class="hljs" style="font-family: monospace, monospace; font-size: 16px; display: block; overflow-x: auto; padding: 0.5em; line-height: 1.3em; color: #abb2bf; background-color: #282c34; border-top-left-radius: 5px; border-top-right-radius: 5px; border-bottom-right-radius: 5px; border-bottom-left-radius: 5px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-tap-highlight-color: rgba(26, 26, 26, 0.301961); -webkit-text-size-adjust: 100%; -webkit-text-stroke-width: 0px; text-decoration: none; background-position: initial initial; background-repeat: initial initial;"><span style="color: #000000;"><code><span class="hljs-symbol">iain@</span>smallvm:~$ df -hFilesystem      Size  Used Avail Use% Mounted onudev            <span class="hljs-number">463</span>M     <span class="hljs-number">0</span>  <span class="hljs-number">463</span>M   <span class="hljs-number">0</span>% /devtmpfs            <span class="hljs-number">99</span>M  <span class="hljs-number">2.3</span>M   <span class="hljs-number">97</span>M   <span class="hljs-number">3</span>% /run/dev/sda2       <span class="hljs-number">7.9</span>G  <span class="hljs-number">3.4</span>G  <span class="hljs-number">4.1</span>G  <span class="hljs-number">46</span>% /tmpfs           <span class="hljs-number">493</span>M     <span class="hljs-number">0</span>  <span class="hljs-number">493</span>M   <span class="hljs-number">0</span>% /dev/shmtmpfs           <span class="hljs-number">5.0</span>M     <span class="hljs-number">0</span>  <span class="hljs-number">5.0</span>M   <span class="hljs-number">0</span>% /run/locktmpfs           <span class="hljs-number">493</span>M     <span class="hljs-number">0</span>  <span class="hljs-number">493</span>M   <span class="hljs-number">0</span>% /sys/fs/cgroup/dev/loop0       <span class="hljs-number">89</span>M   <span class="hljs-number">89</span>M     <span class="hljs-number">0</span> <span class="hljs-number">100</span>% /snap/core/<span class="hljs-number">7270</span>tmpfs            <span class="hljs-number">99</span>M     <span class="hljs-number">0</span>   <span class="hljs-number">99</span>M   <span class="hljs-number">0</span>% /run/user/<span class="hljs-number">1000</span></code></span></pre>
<p style="margin-top: 0.6em; margin-bottom: 0.65em; caret-color: #dcdcdc; color: #dcdcdc; font-family: Avenir, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-tap-highlight-color: rgba(26, 26, 26, 0.301961); -webkit-text-size-adjust: 100%; -webkit-text-stroke-width: 0px; text-decoration: none;"><span style="color: #000000;">Maybe we should get some more space. Power if off.</span></p>
<p style="margin-top: 0.6em; margin-bottom: 0.65em; caret-color: #dcdcdc; color: #dcdcdc; font-family: Avenir, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-tap-highlight-color: rgba(26, 26, 26, 0.301961); -webkit-text-size-adjust: 100%; -webkit-text-stroke-width: 0px; text-decoration: none;"><span style="color: #000000;">Then, increase the disk space in ESXi (and remove any snapshots you have or this will fail)</span></p>
<p style="margin-top: 0.6em; margin-bottom: 0.65em; caret-color: #dcdcdc; color: #dcdcdc; font-family: Avenir, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-tap-highlight-color: rgba(26, 26, 26, 0.301961); -webkit-text-size-adjust: 100%; -webkit-text-stroke-width: 0px; text-decoration: none;"><span style="color: #000000;"><img class="size-full wp-image-41" src="http://rootisgod.com/wp-content/uploads/2020/01/92e58fbf-6774-4cbb-930b-415dfda243b1.png" width="880" height="456" srcset="https://www.rootisgod.com/wp-content/uploads/2020/01/92e58fbf-6774-4cbb-930b-415dfda243b1.png 880w, https://www.rootisgod.com/wp-content/uploads/2020/01/92e58fbf-6774-4cbb-930b-415dfda243b1-300x155.png 300w, https://www.rootisgod.com/wp-content/uploads/2020/01/92e58fbf-6774-4cbb-930b-415dfda243b1-768x398.png 768w" sizes="(max-width: 880px) 100vw, 880px" /></span></p>
<p style="margin-top: 0.6em; margin-bottom: 0.65em; caret-color: #dcdcdc; color: #dcdcdc; font-family: Avenir, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-tap-highlight-color: rgba(26, 26, 26, 0.301961); -webkit-text-size-adjust: 100%; -webkit-text-stroke-width: 0px; text-decoration: none;"><span style="color: #000000;">Then, login and run this;</span></p>
<p style="margin-top: 0.6em; margin-bottom: 0.65em; caret-color: #dcdcdc; color: #dcdcdc; font-family: Avenir, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-tap-highlight-color: rgba(26, 26, 26, 0.301961); -webkit-text-size-adjust: 100%; -webkit-text-stroke-width: 0px; text-decoration: none;"><span style="color: #000000;"><code>sudo cfdisk</code></span></p>
<p style="margin-top: 0.6em; margin-bottom: 0.65em; caret-color: #dcdcdc; color: #dcdcdc; font-family: Avenir, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-tap-highlight-color: rgba(26, 26, 26, 0.301961); -webkit-text-size-adjust: 100%; -webkit-text-stroke-width: 0px; text-decoration: none;"><span style="color: #000000;">Notice above the partition we want to resize is actually /dev/sda2 so choose that in the menu and resize as the option.</span></p>
<p style="margin-top: 0.6em; margin-bottom: 0.65em; caret-color: #dcdcdc; color: #dcdcdc; font-family: Avenir, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-tap-highlight-color: rgba(26, 26, 26, 0.301961); -webkit-text-size-adjust: 100%; -webkit-text-stroke-width: 0px; text-decoration: none;"><span style="color: #000000;"><img class="size-full wp-image-42" src="http://rootisgod.com/wp-content/uploads/2020/01/c3974826-5045-40cf-bf12-338829de653d.png" width="1140" height="686" srcset="https://www.rootisgod.com/wp-content/uploads/2020/01/c3974826-5045-40cf-bf12-338829de653d.png 1140w, https://www.rootisgod.com/wp-content/uploads/2020/01/c3974826-5045-40cf-bf12-338829de653d-300x181.png 300w, https://www.rootisgod.com/wp-content/uploads/2020/01/c3974826-5045-40cf-bf12-338829de653d-1024x616.png 1024w, https://www.rootisgod.com/wp-content/uploads/2020/01/c3974826-5045-40cf-bf12-338829de653d-768x462.png 768w" sizes="(max-width: 1140px) 100vw, 1140px" /></span></p>
<p style="margin-top: 0.6em; margin-bottom: 0.65em; caret-color: #dcdcdc; color: #dcdcdc; font-family: Avenir, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-tap-highlight-color: rgba(26, 26, 26, 0.301961); -webkit-text-size-adjust: 100%; -webkit-text-stroke-width: 0px; text-decoration: none;"><span style="color: #000000;">It<span class="Apple-converted-space">&nbsp;</span><em>should</em><span class="Apple-converted-space">&nbsp;</span>realise there is now 16GB available so it will fin that in for us. Hit enter and accept that.</span></p>
<p style="margin-top: 0.6em; margin-bottom: 0.65em; caret-color: #dcdcdc; color: #dcdcdc; font-family: Avenir, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-tap-highlight-color: rgba(26, 26, 26, 0.301961); -webkit-text-size-adjust: 100%; -webkit-text-stroke-width: 0px; text-decoration: none;"><span style="color: #000000;"><img class="size-full wp-image-43" src="http://rootisgod.com/wp-content/uploads/2020/01/1d13a101-b8fa-403c-ba56-36e3ac1c60d0.png" width="220" height="42"></span></p>
<p style="margin-top: 0.6em; margin-bottom: 0.65em; caret-color: #dcdcdc; color: #dcdcdc; font-family: Avenir, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-tap-highlight-color: rgba(26, 26, 26, 0.301961); -webkit-text-size-adjust: 100%; -webkit-text-stroke-width: 0px; text-decoration: none;"><span style="color: #000000;">It will say the partition has been resized. Choose to write the change, type<span class="Apple-converted-space">&nbsp;</span><code>yes</code><span class="Apple-converted-space">&nbsp;</span>and then quit the program.</span></p>
<p style="margin-top: 0.6em; margin-bottom: 0.65em; caret-color: #dcdcdc; color: #dcdcdc; font-family: Avenir, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-tap-highlight-color: rgba(26, 26, 26, 0.301961); -webkit-text-size-adjust: 100%; -webkit-text-stroke-width: 0px; text-decoration: none;"><span style="color: #000000;"><img class="size-full wp-image-44" src="http://rootisgod.com/wp-content/uploads/2020/01/1153ac66-c72e-4a2a-94b0-742f8b8d7176.png" width="1140" height="686" srcset="https://www.rootisgod.com/wp-content/uploads/2020/01/1153ac66-c72e-4a2a-94b0-742f8b8d7176.png 1140w, https://www.rootisgod.com/wp-content/uploads/2020/01/1153ac66-c72e-4a2a-94b0-742f8b8d7176-300x181.png 300w, https://www.rootisgod.com/wp-content/uploads/2020/01/1153ac66-c72e-4a2a-94b0-742f8b8d7176-1024x616.png 1024w, https://www.rootisgod.com/wp-content/uploads/2020/01/1153ac66-c72e-4a2a-94b0-742f8b8d7176-768x462.png 768w" sizes="(max-width: 1140px) 100vw, 1140px" /></span></p>
<p style="margin-top: 0.6em; margin-bottom: 0.65em; caret-color: #dcdcdc; color: #dcdcdc; font-family: Avenir, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-tap-highlight-color: rgba(26, 26, 26, 0.301961); -webkit-text-size-adjust: 100%; -webkit-text-stroke-width: 0px; text-decoration: none;"><span style="color: #000000;">Now, all we have done is increase the size of the partition but the filesystem doesn&#8217;t know it can use this yet (output from a df -h.</span></p>
<pre class="hljs"><code><span class="hljs-symbol">iain@</span>smallvm:~$ df -h
Filesystem      Size  Used Avail Use% Mounted on
...
/dev/sda2       <span class="hljs-number">7.9</span>G  <span class="hljs-number">3.4</span>G  <span class="hljs-number">4.1</span>G  <span class="hljs-number">46</span>% /
...</code></pre>
<p style="margin-top: 0.6em; margin-bottom: 0.65em; caret-color: #dcdcdc; color: #dcdcdc; font-family: Avenir, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-tap-highlight-color: rgba(26, 26, 26, 0.301961); -webkit-text-size-adjust: 100%; -webkit-text-stroke-width: 0px; text-decoration: none;"><span style="color: #000000;">So, we have to let it use this space. Run this command (again, change /dev/sda2 if yours is different)</span></p>
<p style="margin-top: 0.6em; margin-bottom: 0.65em; caret-color: #dcdcdc; color: #dcdcdc; font-family: Avenir, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-tap-highlight-color: rgba(26, 26, 26, 0.301961); -webkit-text-size-adjust: 100%; -webkit-text-stroke-width: 0px; text-decoration: none;"><span style="color: #000000;"><code>sudo resize2fs /dev/sda2</code></span></p>
<p style="margin-top: 0.6em; margin-bottom: 0.65em; caret-color: #dcdcdc; color: #dcdcdc; font-family: Avenir, Arial, sans-serif; font-size: 16px; font-style: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-tap-highlight-color: rgba(26, 26, 26, 0.301961); -webkit-text-size-adjust: 100%; -webkit-text-stroke-width: 0px; text-decoration: none;"><span style="color: #000000;">After that we should have an expanded disk. Success! No more over-specifying disk because resizing a linux disk is a dark art 🙂</span></p>
<pre class="hljs"><code><span class="hljs-symbol">iain@</span>smallvm:~$ sudo resize2fs /dev/sda2<br>
resize2fs <span class="hljs-number">1.44</span><span class="hljs-number">.1</span> (<span class="hljs-number">24</span>-Mar<span class="hljs-number">-2018</span>)<br>
Filesystem at /dev/sda2 <span class="hljs-keyword">is</span> mounted on /; on-line resizing required<br>
old_desc_blocks = <span class="hljs-number">1</span>, new_desc_blocks = <span class="hljs-number">2</span><br>
The filesystem on /dev/sda2 <span class="hljs-keyword">is</span> now <span class="hljs-number"><a dir="ltr" href="tel:4193787">4193787</a></span> (<span class="hljs-number">4</span>k) blocks long.</code></pre>
<pre class="hljs"><code></code></pre>
<pre><span class="hljs-symbol">iain@</span>smallvm:~$ df -h<br>Filesystem Size Used Avail Use% Mounted on<br>...<br>/dev/sda2 <span class="hljs-number">16</span>G <span class="hljs-number">3.4</span>G <span class="hljs-number">12</span>G <span class="hljs-number">23</span>% /<br>...</pre>
<pre class="hljs"><code></code></pre>


<h6><strong>ADDENDUM</strong></h6>



<pre class="wp-block-preformatted">If you have another EXT4 disk mounted that you need to resize, do this. 

Create a disk like this;
 
 sudo fdisk /dev/sdb (make partition)
 mkfs -t ext4 /dev/sdb1 (make ext4)
 mkdir /u01
 mount /dev/sdb1 /u01

Then, if you increase the space, this will expand it on the OS</pre>



<figure class="wp-block-table is-style-regular"><table class=""><tbody><tr><td>
  Unmount the disk
  </td><td>
  umount /u01
  </td></tr><tr><td>   Check it is removed on filesystem   </td><td>
  df -h
  </td></tr><tr><td>
  Amend partition
  </td><td>
  fdisk /dev/sdb
  </td></tr><tr><td>   Delete that partition   </td><td>
  d
  </td></tr><tr><td>   Recreate the partition with new limits   </td><td>
  n, p, 1, defaults, w
  </td></tr><tr><td>   Check Disk not mounted, unmount if so   </td><td>
  df -h<br>
    umount /u01
  </td></tr><tr><td>   Check with e2fsck (required before resize2fs resize)   </td><td>
  e2fsck -f /dev/sdb1
  </td></tr><tr><td>
  Resize
  </td><td>
  resize2fs /dev/sdb1
  </td></tr><tr><td>
  Remount or reboot
  </td><td>
  mount /dev/sdb1 /u01
  </td></tr></tbody></table></figure>


<p><span style="color: #000000;"><code></code></span><span style="color: #000000;"><code></code></span></p>


<p></p>
	</div><!-- .entry-content -->

	<footer class="entry-footer">
		<span class="byline"><svg class="svg-icon" width="16" height="16" aria-hidden="true" role="img" focusable="false" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg><span class="screen-reader-text">Posted by</span><span class="author vcard"><a class="url fn n" href="https://www.rootisgod.com/index.php/author/iain/">iain</a></span></span><span class="posted-on"><svg class="svg-icon" width="16" height="16" aria-hidden="true" role="img" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><defs><path id="a" d="M0 0h24v24H0V0z"></path></defs><clipPath id="b"><use xlink:href="#a" overflow="visible"></use></clipPath><path clip-path="url(#b)" d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2zm4.2 14.2L11 13V7h1.5v5.2l4.5 2.7-.8 1.3z"></path></svg><a href="https://www.rootisgod.com/index.php/2020/01/18/ubuntu-vm/" rel="bookmark"><time class="entry-date published" datetime="2020-01-18T08:47:19+00:00">18th January 2020</time><time class="updated" datetime="2020-07-15T10:21:00+01:00">15th July 2020</time></a></span><span class="cat-links"><svg class="svg-icon" width="16" height="16" aria-hidden="true" role="img" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg><span class="screen-reader-text">Posted in</span><a href="https://www.rootisgod.com/index.php/category/uncategorised/" rel="category tag">Uncategorised</a></span><span class="comments-link"><svg class="svg-icon" width="16" height="16" aria-hidden="true" role="img" focusable="false" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M21.99 4c0-1.1-.89-2-1.99-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4-.01-18z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg><a href="https://www.rootisgod.com/index.php/2020/01/18/ubuntu-vm/#respond">Leave a comment<span class="screen-reader-text"> on Awww Snap, My Linux Partition is Too Small..</span></a></span>	</footer><!-- .entry-footer -->
</article><!-- #post-45 -->

<article id="post-26" class="post-26 post type-post status-publish format-standard hentry category-uncategorised entry">
	<header class="entry-header">
		<h2 class="entry-title"><a href="https://www.rootisgod.com/index.php/2019/12/07/mini-vpn-for-all/" rel="bookmark">Mini VPN for All!</a></h2>	</header><!-- .entry-header -->

	
	<div class="entry-content">
		
<figure class="wp-block-image size-large"><img src="http://rootisgod.com/wp-content/uploads/2019/12/ee8bb97be0a1411395d98185a1b5fcfc-1024x174.png" alt="" class="wp-image-32" srcset="https://www.rootisgod.com/wp-content/uploads/2019/12/ee8bb97be0a1411395d98185a1b5fcfc-1024x174.png 1024w, https://www.rootisgod.com/wp-content/uploads/2019/12/ee8bb97be0a1411395d98185a1b5fcfc-300x51.png 300w, https://www.rootisgod.com/wp-content/uploads/2019/12/ee8bb97be0a1411395d98185a1b5fcfc-768x130.png 768w, https://www.rootisgod.com/wp-content/uploads/2019/12/ee8bb97be0a1411395d98185a1b5fcfc.png 1180w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure>


	</div><!-- .entry-content -->

	<footer class="entry-footer">
		<span class="byline"><svg class="svg-icon" width="16" height="16" aria-hidden="true" role="img" focusable="false" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg><span class="screen-reader-text">Posted by</span><span class="author vcard"><a class="url fn n" href="https://www.rootisgod.com/index.php/author/iain/">iain</a></span></span><span class="posted-on"><svg class="svg-icon" width="16" height="16" aria-hidden="true" role="img" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><defs><path id="a" d="M0 0h24v24H0V0z"></path></defs><clipPath id="b"><use xlink:href="#a" overflow="visible"></use></clipPath><path clip-path="url(#b)" d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2zm4.2 14.2L11 13V7h1.5v5.2l4.5 2.7-.8 1.3z"></path></svg><a href="https://www.rootisgod.com/index.php/2019/12/07/mini-vpn-for-all/" rel="bookmark"><time class="entry-date published" datetime="2019-12-07T08:42:29+00:00">7th December 2019</time><time class="updated" datetime="2019-12-07T11:37:28+00:00">7th December 2019</time></a></span><span class="cat-links"><svg class="svg-icon" width="16" height="16" aria-hidden="true" role="img" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg><span class="screen-reader-text">Posted in</span><a href="https://www.rootisgod.com/index.php/category/uncategorised/" rel="category tag">Uncategorised</a></span><span class="comments-link"><svg class="svg-icon" width="16" height="16" aria-hidden="true" role="img" focusable="false" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M21.99 4c0-1.1-.89-2-1.99-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4-.01-18z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg><a href="https://www.rootisgod.com/index.php/2019/12/07/mini-vpn-for-all/#respond">Leave a comment<span class="screen-reader-text"> on Mini VPN for All!</span></a></span>	</footer><!-- .entry-footer -->
</article><!-- #post-26 -->

		</main><!-- .site-main -->
	</div><!-- .content-area -->


	</div><!-- #content -->

	<footer id="colophon" class="site-footer">
		
	<aside class="widget-area" role="complementary" aria-label="Footer">
							<div class="widget-column footer-widget-1">
					<section id="search-2" class="widget widget_search"><form role="search" method="get" class="search-form" action="https://www.rootisgod.com/">
				<label>
					<span class="screen-reader-text">Search for:</span>
					<input type="search" class="search-field" placeholder="Search &hellip;" value="" name="s" />
				</label>
				<input type="submit" class="search-submit" value="Search" />
			</form></section>		<section id="recent-posts-2" class="widget widget_recent_entries">		<h2 class="widget-title">Recent Posts</h2>		<ul>
											<li>
					<a href="https://www.rootisgod.com/index.php/2020/07/29/microsoft-sql-server-backups-and-deletions/">Microsoft SQL Server Backups and Deletions</a>
									</li>
											<li>
					<a href="https://www.rootisgod.com/index.php/2020/01/18/ubuntu-vm/">Awww Snap, My Linux Partition is Too Small..</a>
									</li>
											<li>
					<a href="https://www.rootisgod.com/index.php/2019/12/07/mini-vpn-for-all/">Mini VPN for All!</a>
									</li>
					</ul>
		</section><section id="recent-comments-2" class="widget widget_recent_comments"><h2 class="widget-title">Recent Comments</h2><ul id="recentcomments"></ul></section><section id="archives-2" class="widget widget_archive"><h2 class="widget-title">Archives</h2>		<ul>
				<li><a href='https://www.rootisgod.com/index.php/2020/07/'>July 2020</a></li>
	<li><a href='https://www.rootisgod.com/index.php/2020/01/'>January 2020</a></li>
	<li><a href='https://www.rootisgod.com/index.php/2019/12/'>December 2019</a></li>
		</ul>
			</section><section id="categories-2" class="widget widget_categories"><h2 class="widget-title">Categories</h2>		<ul>
				<li class="cat-item cat-item-1"><a href="https://www.rootisgod.com/index.php/category/uncategorised/">Uncategorised</a>
</li>
		</ul>
			</section><section id="meta-2" class="widget widget_meta"><h2 class="widget-title">Meta</h2>			<ul>
						<li><a href="https://www.rootisgod.com/wp-login.php">Log in</a></li>
			<li><a href="https://www.rootisgod.com/index.php/feed/">Entries feed</a></li>
			<li><a href="https://www.rootisgod.com/index.php/comments/feed/">Comments feed</a></li>
			<li><a href="https://en-gb.wordpress.org/">WordPress.org</a></li>			</ul>
			</section>					</div>
					</aside><!-- .widget-area -->

		<div class="site-info">
										<a class="site-name" href="https://www.rootisgod.com/" rel="home">RootIsGod</a>,
						<a href="https://en-gb.wordpress.org/" class="imprint">
				Proudly powered by WordPress.			</a>
								</div><!-- .site-info -->
	</footer><!-- #colophon -->

</div><!-- #page -->

<script src='https://www.rootisgod.com/wp-includes/js/wp-embed.min.js?ver=5.4.2'></script>
	<script>
	/(trident|msie)/i.test(navigator.userAgent)&&document.getElementById&&window.addEventListener&&window.addEventListener("hashchange",function(){var t,e=location.hash.substring(1);/^[A-z0-9_-]+$/.test(e)&&(t=document.getElementById(e))&&(/^(?:a|select|input|button|textarea)$/i.test(t.tagName)||(t.tabIndex=-1),t.focus())},!1);
	</script>
	
</body>
</html>

<!-- Page generated by LiteSpeed Cache 3.2.4 on 2020-08-08 16:40:25 -->